{"version":3,"sources":["js/loading-indicator.module.js","js/loading-indicator/loading-indicator-button.directive.js","jdm-loading-indicator.js","js/loading-indicator/loading-indicator-container.directive.js","js/loading-indicator/loading-indicator-inline.directive.js","js/loading-indicator/loading-indicator.directive.js","js/loading-indicator/loading-indicator.interceptor.js","js/loading-indicator/loading-indicator.provider.js","templates.js"],"names":["angular","module","LoadingIndicatorButton","LoadingIndicatorButtonController","loadingIndicator","vm","this","referenceId","initDirective","buttonClasses","indicator","directives","checkDisabled","buttonDisabled","requests","length","disableOnPendingRequest","wrapperClasses","classes","split","forEach","classname","isDarkTheme","isLoading","isDefined","indicatorPosition","position","$inject","directive","restrict","controller","controllerAs","bindToController","scope","transclude","templateUrl","LoadingIndicator","link","element","attrs","classList","add","LoadingIndicatorController","requires","GlobalLoadingIndicator","GlobalLoadingIndicatorController","LoadingIndicatorInterceptor","$q","$templateCache","request","config","checkRequest","response","checkResponse","responseError","rejection","reject","undefined","setLoadingState","method","get","url","factory","LoadingIndicatorProvider","LoadingIndicatorService","$timeout","$rootScope","service","preLoad","addLoadingState","data","total","push","$emit","x","destroy","deleteLoadingState","index","indexOf","splice","_config","isUndefined","threshold","setDefaultReferenceId","defaultId","setDefaultPosition","defaultPosition","setThreshold","defaultThreshold","$get","provider","run","put"],"mappings":"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","file":"jdm-loading-indicator.min.js","sourcesContent":["angular.module('jdm.loadingIndicator', [\n    'ngAnimate',\n    'ngAria'\n]);"," (function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('loadingIndicatorButton', LoadingIndicatorButton);\n\n    LoadingIndicatorButton.$inject = ['loadingIndicator'];\n    \n    function LoadingIndicatorButton() {\n        // Usage: <global-loading-indicator></global-loading-indicator>\n        //\n        // Creates:\n        //\n        var directive = {\n            restrict: 'E',\n            controller: LoadingIndicatorButtonController,\n            controllerAs: 'loadingIndicatorButton', \n            bindToController: {\n                buttonClasses: '@',\n                referenceId: '@',\n                isLoading: '<',\n                indicatorPosition: '@',\n                disableOnPendingRequest: '@',\n                buttonDisabled: '<',\n                isDarkTheme: '@'\n            },\n            scope: {},\n            transclude: true,\n            templateUrl: 'templates/loading-indicator-button.tpl.html',\n        }; \n        \n        return directive;\n             \n        /* @ngInject */\n        function LoadingIndicatorButtonController (loadingIndicator) {\n            var vm = this;\n            var referenceId = vm.referenceId || 0;\n\n            loadingIndicator.initDirective(referenceId);\n            \n            vm.buttonClasses = vm.buttonClasses || '';\n            vm.indicator = loadingIndicator.directives[referenceId];\n\n            vm.checkDisabled = function() {                \n                if(vm.buttonDisabled) {\n                    return true;\n                }\n                \n                if(vm.indicator.requests.length && vm.disableOnPendingRequest) {\n                    return true;\n                }                       \n            };\n\n            vm.wrapperClasses = function() {\n                var classes = {};\n\n                vm.buttonClasses.split(' ').forEach(function(classname) {\n                    classes[classname] = true;\n                });\n\n                if(vm.isDarkTheme) {\n                    classes['jdm-loading-indicator-button--dark'] = true;\n                }\n\n                if(vm.indicator.requests.length || vm.isLoading) {\n                    classes['jdm-loading-indicator-button--loading'] = true;\n                }\n\n                if(vm.indicator.requests.length && vm.disableOnPendingRequest || vm.buttonDisabled) {\n                    classes['disabled'] = true;\n                }\n                \n                if(angular.isDefined(vm.indicatorPosition)) {\n                    classes['jdm-loading-indicator-button--loading-' + vm.indicatorPosition] = true;\n                } else {\n                    classes['jdm-loading-indicator-button--loading-' + loadingIndicator.position] = true;\n                }\n                \n                return classes;\n            };\n        }\n    }\n})();","angular.module('jdm.loadingIndicator', [\n    'ngAnimate',\n    'ngAria'\n]);\n (function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('loadingIndicatorButton', LoadingIndicatorButton);\n\n    LoadingIndicatorButton.$inject = ['loadingIndicator'];\n    \n    function LoadingIndicatorButton() {\n        // Usage: <global-loading-indicator></global-loading-indicator>\n        //\n        // Creates:\n        //\n        LoadingIndicatorButtonController.$inject = [\"loadingIndicator\"];\n        var directive = {\n            restrict: 'E',\n            controller: LoadingIndicatorButtonController,\n            controllerAs: 'loadingIndicatorButton', \n            bindToController: {\n                buttonClasses: '@',\n                referenceId: '@',\n                isLoading: '<',\n                indicatorPosition: '@',\n                disableOnPendingRequest: '@',\n                buttonDisabled: '<',\n                isDarkTheme: '@'\n            },\n            scope: {},\n            transclude: true,\n            templateUrl: 'templates/loading-indicator-button.tpl.html',\n        }; \n        \n        return directive;\n             \n        /* @ngInject */\n        function LoadingIndicatorButtonController (loadingIndicator) {\n            var vm = this;\n            var referenceId = vm.referenceId || 0;\n\n            loadingIndicator.initDirective(referenceId);\n            \n            vm.buttonClasses = vm.buttonClasses || '';\n            vm.indicator = loadingIndicator.directives[referenceId];\n\n            vm.checkDisabled = function() {                \n                if(vm.buttonDisabled) {\n                    return true;\n                }\n                \n                if(vm.indicator.requests.length && vm.disableOnPendingRequest) {\n                    return true;\n                }                       \n            };\n\n            vm.wrapperClasses = function() {\n                var classes = {};\n\n                vm.buttonClasses.split(' ').forEach(function(classname) {\n                    classes[classname] = true;\n                });\n\n                if(vm.isDarkTheme) {\n                    classes['jdm-loading-indicator-button--dark'] = true;\n                }\n\n                if(vm.indicator.requests.length || vm.isLoading) {\n                    classes['jdm-loading-indicator-button--loading'] = true;\n                }\n\n                if(vm.indicator.requests.length && vm.disableOnPendingRequest || vm.buttonDisabled) {\n                    classes['disabled'] = true;\n                }\n                \n                if(angular.isDefined(vm.indicatorPosition)) {\n                    classes['jdm-loading-indicator-button--loading-' + vm.indicatorPosition] = true;\n                } else {\n                    classes['jdm-loading-indicator-button--loading-' + loadingIndicator.position] = true;\n                }\n                \n                return classes;\n            };\n        }\n    }\n})();\n(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('loadingIndicatorContainer', LoadingIndicator);\n\n    LoadingIndicator.$inject = ['loadingIndicator'];\n    \n    function LoadingIndicator() {\n        // Usage: <div loading-indicator-container></div>\n        //\n        // Creates:\n        //\n        var directive = {\n            restrict: 'A',\n            scope: {},\n            link: link\n        }; \n        \n        return directive;\n        \n        function link(scope, element, attrs) {\n            element[0].classList.add('jdm-loading-container');\n        }\n    }\n})();\n(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('loadingIndicator', LoadingIndicator);\n\n    LoadingIndicator.$inject = ['loadingIndicator'];\n    \n    function LoadingIndicator() {\n        // Usage: <loading-indicator></loading-indicator>\n        //\n        // Creates:\n        //\n        LoadingIndicatorController.$inject = [\"loadingIndicator\"];\n        var directive = {\n            restrict: 'E',\n            requires: '^loadingIndicatorContainer',\n            controller: LoadingIndicatorController,\n            controllerAs: 'loadingIndicator', \n            bindToController: {\n                referenceId: '@',\n                isLoading: '='\n            },\n            scope: {},\n            templateUrl: 'templates/loading-indicator-inline.tpl.html',\n        }; \n        \n        return directive;\n             \n        /* @ngInject */\n        function LoadingIndicatorController (loadingIndicator) {\n            var vm = this;\n            var referenceId = vm.referenceId || 0;\n\n            loadingIndicator.initDirective(referenceId);\n            \n            vm.indicator = loadingIndicator.directives[referenceId];\n        }\n    }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('globalLoadingIndicator', GlobalLoadingIndicator);\n\n    GlobalLoadingIndicator.$inject = ['loadingIndicator'];\n    \n    function GlobalLoadingIndicator() {\n        // Usage: <global-loading-indicator></global-loading-indicator>\n        //\n        // Creates:\n        //\n        GlobalLoadingIndicatorController.$inject = [\"loadingIndicator\"];\n        var directive = {\n            restrict: 'E',\n            controller: GlobalLoadingIndicatorController,\n            controllerAs: 'loadingIndicator', \n            bindToController: {\n                referenceId: '@',\n                isLoading: '='\n            },\n            scope: {},\n            templateUrl: 'templates/loading-indicator-global.tpl.html',\n        }; \n        \n        return directive;\n             \n        /* @ngInject */\n        function GlobalLoadingIndicatorController (loadingIndicator) {\n            var vm = this;\n            var referenceId = vm.referenceId || 0;\n\n            loadingIndicator.initDirective(referenceId);\n            \n            vm.indicator = loadingIndicator.directives[referenceId];\n        }\n    }\n})();\n(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .factory('loadingIndicatorInterceptor', LoadingIndicatorInterceptor);\n\n    LoadingIndicatorInterceptor.$inject = ['$q', '$templateCache', 'loadingIndicator', ];\n\n    function LoadingIndicatorInterceptor($q, $templateCache, loadingIndicator) {\n        return { \n            request: request,\n            response: response,\n            responseError: responseError \n        };\n\n        // Exposed Functions\n        function request(config) {\n            checkRequest(config);\n            return config;\n        }\n        \n        function response(response) {\n            checkResponse(response);\n            return response;\n        }\n        \n        function responseError(rejection) {\n            checkResponse(rejection);\n            return $q.reject(rejection);\n        }\n        \n        // Internal Functions\n        function checkResponse(response) {\n            if (response !== undefined) {\n                loadingIndicator.setLoadingState(false, response.config);\n            }\n        }\n\n        function checkRequest(config) {\n            // If the request is a get and the request url is not in $templateCache\n            if (config.method === 'GET') {\n                if ($templateCache.get(config.url) === undefined) {\n                    loadingIndicator.setLoadingState(true, config);\n                }\n            } else {\n                loadingIndicator.setLoadingState(true, config);\n            }\n        }  \n    }\n})();\n(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .provider('loadingIndicator', LoadingIndicatorProvider);\n        \n    function LoadingIndicatorProvider() {\n        var referenceId = 0,\n            threshold = 100,\n            position = 'left';\n            \n        this.setDefaultReferenceId = function(defaultId) {\n            referenceId = defaultId;\n        };\n        \n        this.setDefaultPosition = function(defaultPosition) {\n            position = defaultPosition;\n        };\n        \n        this.setThreshold = function(defaultThreshold) {\n            threshold = defaultThreshold;\n        };\n\n        this.$get = LoadingIndicatorService;\n        \n        LoadingIndicatorService.$inject = ['$timeout', '$rootScope'];\n        \n        function LoadingIndicatorService($timeout, $rootScope) {            \n            var service = {\n                directives: {},\n                position: position,\n                initDirective: initDirective,\n                addLoadingState: addLoadingState,\n                deleteLoadingState: deleteLoadingState,\n                setLoadingState: setLoadingState\n            };\n            \n            return service;\n            \n            // Exposed Functions\n            function initDirective(referenceId) {\n                service.directives[referenceId] = service.directives[referenceId] || preLoad(referenceId);\n        \n                return service.directives[referenceId];\n            }\n            \n            function addLoadingState(data) {\n                var directive = service.directives[data.referenceId] || preLoad(data.referenceId);\n\n                if (data.isLoading) {\n                    if (typeof directive.requests === 'undefined') {\n                        directive.total = 0;\n                        directive.requests = [];\n                    }\n\n                    directive.total++;\n                    directive.requests.push(data);\n                    \n                    //Check by referenceID for broadcasts\n                    if(directive.requests.length === 1) {\n                        $rootScope.$emit('loadingIndicator:started', data);\n                    }\n                } else {\n                    for (var x = 0; x < directive.requests.length; x++) {\n                        //if the url's and referenceId's match, delete it\n                        if (directive.requests[x].url === data.url && directive.requests[x].referenceId === data.referenceId) {\n                            //We only want to destroy one request at a time, so break after\n                            directive.requests[x].destroy();\n                            directive.total--;\n                            break;\n                        }\n                    }\n                }\n\n                return data;\n            }\n\n            function deleteLoadingState(data) {\n                var requests = service.directives[data.referenceId].requests;\n                var index = requests.indexOf(data);\n                \n                if (index > -1) {\n                    requests.splice(index, 1);\n                }\n                \n                if(requests.length === 0) {\n                    $rootScope.$emit('loadingIndicator:stopped', data);\n                }\n            }\n            \n            function setLoadingState(isLoading, config) {\n                var _config = config || {};\n                \n                if (angular.isUndefined(isLoading)) {\n                    return;\n                }\n\n                var data = {\n                    isLoading: isLoading,\n                    url: _config.url,\n                    position: _config.position || position,\n                    referenceId: _config.referenceId || referenceId,\n                    destroy: function() {\n                        deleteLoadingState(data);\n                    }\n                };\n                                \n                return addLoadingState(data);\n            }\n            \n            function preLoad(referenceId) {\n                service.directives[referenceId] = {\n                    requests: [],\n                    total: 0\n                };\n                \n                return service.directives[referenceId];\n            }\n        }\n    }\n\n\n})();\nangular.module(\"jdm.loadingIndicator\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"templates/loading-indicator-button.tpl.html\",\"<button type=\\\"button\\\" class=\\\"jdm-loading-container jdm-loading-indicator-button\\\" ng-disabled=\\\"loadingIndicatorButton.checkDisabled()\\\" ng-class=\\\"loadingIndicatorButton.wrapperClasses()\\\"> \\n    <span class=\\\"jdm-loading-indicator-button__wrapper\\\">\\n        <span class=\\\"jdm-loading jdm-loading--button\\\" ng-if=\\\"loadingIndicatorButton.isLoading || loadingIndicatorButton.indicator.requests.length\\\"> \\n            <i class=\\\"jdm-loading__spinner jdm-loading__spinner--button\\\"></i>\\n        </span>\\n        \\n        <span class=\\\"jdm-loading-indicator-button__content\\\" ng-transclude></span>\\n    </span>\\n</button>\");\n$templateCache.put(\"templates/loading-indicator-global.tpl.html\",\"<span class=\\\"jdm-loading jdm-loading--global\\\" ng-if=\\\"loadingIndicator.isLoading || loadingIndicator.indicator.requests.length\\\">\\n    <i class=\\\"jdm-loading__spinner jdm-loading__spinner--global\\\"></i> \\n</span>\");\n$templateCache.put(\"templates/loading-indicator-inline.tpl.html\",\"<span class=\\\"jdm-loading jdm-loading--inline\\\" ng-if=\\\"loadingIndicator.isLoading || loadingIndicator.indicator.requests.length\\\">\\n    <i class=\\\"jdm-loading__spinner jdm-loading__spinner--inline\\\"></i> \\n</span>\");\n$templateCache.put(\"templates/loading-indicator-progress.tpl.html\",\"<span class=\\\"loading-container\\\"> \\n     <span class=\\\"loading-item\\\"> \\n         <progress max=\\\"{{ jdmLoadingService.directives[referenceId].total }}\\\" value=\\\"{{ jdmLoadingService.directives[referenceId].total - jdmLoadingService.directives[referenceId].messages.length }}\\\"></progress> \\n     </span>\\n</span>\\n\");}]);","(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('loadingIndicatorContainer', LoadingIndicator);\n\n    LoadingIndicator.$inject = ['loadingIndicator'];\n    \n    function LoadingIndicator() {\n        // Usage: <div loading-indicator-container></div>\n        //\n        // Creates:\n        //\n        var directive = {\n            restrict: 'A',\n            scope: {},\n            link: link\n        }; \n        \n        return directive;\n        \n        function link(scope, element, attrs) {\n            element[0].classList.add('jdm-loading-container');\n        }\n    }\n})();","(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('loadingIndicator', LoadingIndicator);\n\n    LoadingIndicator.$inject = ['loadingIndicator'];\n    \n    function LoadingIndicator() {\n        // Usage: <loading-indicator></loading-indicator>\n        //\n        // Creates:\n        //\n        var directive = {\n            restrict: 'E',\n            requires: '^loadingIndicatorContainer',\n            controller: LoadingIndicatorController,\n            controllerAs: 'loadingIndicator', \n            bindToController: {\n                referenceId: '@',\n                isLoading: '='\n            },\n            scope: {},\n            templateUrl: 'templates/loading-indicator-inline.tpl.html',\n        }; \n        \n        return directive;\n             \n        /* @ngInject */\n        function LoadingIndicatorController (loadingIndicator) {\n            var vm = this;\n            var referenceId = vm.referenceId || 0;\n\n            loadingIndicator.initDirective(referenceId);\n            \n            vm.indicator = loadingIndicator.directives[referenceId];\n        }\n    }\n})();","(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .directive('globalLoadingIndicator', GlobalLoadingIndicator);\n\n    GlobalLoadingIndicator.$inject = ['loadingIndicator'];\n    \n    function GlobalLoadingIndicator() {\n        // Usage: <global-loading-indicator></global-loading-indicator>\n        //\n        // Creates:\n        //\n        var directive = {\n            restrict: 'E',\n            controller: GlobalLoadingIndicatorController,\n            controllerAs: 'loadingIndicator', \n            bindToController: {\n                referenceId: '@',\n                isLoading: '='\n            },\n            scope: {},\n            templateUrl: 'templates/loading-indicator-global.tpl.html',\n        }; \n        \n        return directive;\n             \n        /* @ngInject */\n        function GlobalLoadingIndicatorController (loadingIndicator) {\n            var vm = this;\n            var referenceId = vm.referenceId || 0;\n\n            loadingIndicator.initDirective(referenceId);\n            \n            vm.indicator = loadingIndicator.directives[referenceId];\n        }\n    }\n})();","(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .factory('loadingIndicatorInterceptor', LoadingIndicatorInterceptor);\n\n    LoadingIndicatorInterceptor.$inject = ['$q', '$templateCache', 'loadingIndicator', ];\n\n    function LoadingIndicatorInterceptor($q, $templateCache, loadingIndicator) {\n        return { \n            request: request,\n            response: response,\n            responseError: responseError \n        };\n\n        // Exposed Functions\n        function request(config) {\n            checkRequest(config);\n            return config;\n        }\n        \n        function response(response) {\n            checkResponse(response);\n            return response;\n        }\n        \n        function responseError(rejection) {\n            checkResponse(rejection);\n            return $q.reject(rejection);\n        }\n        \n        // Internal Functions\n        function checkResponse(response) {\n            if (response !== undefined) {\n                loadingIndicator.setLoadingState(false, response.config);\n            }\n        }\n\n        function checkRequest(config) {\n            // If the request is a get and the request url is not in $templateCache\n            if (config.method === 'GET') {\n                if ($templateCache.get(config.url) === undefined) {\n                    loadingIndicator.setLoadingState(true, config);\n                }\n            } else {\n                loadingIndicator.setLoadingState(true, config);\n            }\n        }  \n    }\n})();","(function() {\n    'use strict';\n\n    angular\n        .module('jdm.loadingIndicator')\n        .provider('loadingIndicator', LoadingIndicatorProvider);\n        \n    function LoadingIndicatorProvider() {\n        var referenceId = 0,\n            threshold = 100,\n            position = 'left';\n            \n        this.setDefaultReferenceId = function(defaultId) {\n            referenceId = defaultId;\n        };\n        \n        this.setDefaultPosition = function(defaultPosition) {\n            position = defaultPosition;\n        };\n        \n        this.setThreshold = function(defaultThreshold) {\n            threshold = defaultThreshold;\n        };\n\n        this.$get = LoadingIndicatorService;\n        \n        LoadingIndicatorService.$inject = ['$timeout', '$rootScope'];\n        \n        function LoadingIndicatorService($timeout, $rootScope) {            \n            var service = {\n                directives: {},\n                position: position,\n                initDirective: initDirective,\n                addLoadingState: addLoadingState,\n                deleteLoadingState: deleteLoadingState,\n                setLoadingState: setLoadingState\n            };\n            \n            return service;\n            \n            // Exposed Functions\n            function initDirective(referenceId) {\n                service.directives[referenceId] = service.directives[referenceId] || preLoad(referenceId);\n        \n                return service.directives[referenceId];\n            }\n            \n            function addLoadingState(data) {\n                var directive = service.directives[data.referenceId] || preLoad(data.referenceId);\n\n                if (data.isLoading) {\n                    if (typeof directive.requests === 'undefined') {\n                        directive.total = 0;\n                        directive.requests = [];\n                    }\n\n                    directive.total++;\n                    directive.requests.push(data);\n                    \n                    //Check by referenceID for broadcasts\n                    if(directive.requests.length === 1) {\n                        $rootScope.$emit('loadingIndicator:started', data);\n                    }\n                } else {\n                    for (var x = 0; x < directive.requests.length; x++) {\n                        //if the url's and referenceId's match, delete it\n                        if (directive.requests[x].url === data.url && directive.requests[x].referenceId === data.referenceId) {\n                            //We only want to destroy one request at a time, so break after\n                            directive.requests[x].destroy();\n                            directive.total--;\n                            break;\n                        }\n                    }\n                }\n\n                return data;\n            }\n\n            function deleteLoadingState(data) {\n                var requests = service.directives[data.referenceId].requests;\n                var index = requests.indexOf(data);\n                \n                if (index > -1) {\n                    requests.splice(index, 1);\n                }\n                \n                if(requests.length === 0) {\n                    $rootScope.$emit('loadingIndicator:stopped', data);\n                }\n            }\n            \n            function setLoadingState(isLoading, config) {\n                var _config = config || {};\n                \n                if (angular.isUndefined(isLoading)) {\n                    return;\n                }\n\n                var data = {\n                    isLoading: isLoading,\n                    url: _config.url,\n                    position: _config.position || position,\n                    referenceId: _config.referenceId || referenceId,\n                    destroy: function() {\n                        deleteLoadingState(data);\n                    }\n                };\n                                \n                return addLoadingState(data);\n            }\n            \n            function preLoad(referenceId) {\n                service.directives[referenceId] = {\n                    requests: [],\n                    total: 0\n                };\n                \n                return service.directives[referenceId];\n            }\n        }\n    }\n\n\n})();","angular.module(\"jdm.loadingIndicator\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"templates/loading-indicator-button.tpl.html\",\"<button type=\\\"button\\\" class=\\\"jdm-loading-container jdm-loading-indicator-button\\\" ng-disabled=\\\"loadingIndicatorButton.checkDisabled()\\\" ng-class=\\\"loadingIndicatorButton.wrapperClasses()\\\"> \\n    <span class=\\\"jdm-loading-indicator-button__wrapper\\\">\\n        <span class=\\\"jdm-loading jdm-loading--button\\\" ng-if=\\\"loadingIndicatorButton.isLoading || loadingIndicatorButton.indicator.requests.length\\\"> \\n            <i class=\\\"jdm-loading__spinner jdm-loading__spinner--button\\\"></i>\\n        </span>\\n        \\n        <span class=\\\"jdm-loading-indicator-button__content\\\" ng-transclude></span>\\n    </span>\\n</button>\");\n$templateCache.put(\"templates/loading-indicator-global.tpl.html\",\"<span class=\\\"jdm-loading jdm-loading--global\\\" ng-if=\\\"loadingIndicator.isLoading || loadingIndicator.indicator.requests.length\\\">\\n    <i class=\\\"jdm-loading__spinner jdm-loading__spinner--global\\\"></i> \\n</span>\");\n$templateCache.put(\"templates/loading-indicator-inline.tpl.html\",\"<span class=\\\"jdm-loading jdm-loading--inline\\\" ng-if=\\\"loadingIndicator.isLoading || loadingIndicator.indicator.requests.length\\\">\\n    <i class=\\\"jdm-loading__spinner jdm-loading__spinner--inline\\\"></i> \\n</span>\");\n$templateCache.put(\"templates/loading-indicator-progress.tpl.html\",\"<span class=\\\"loading-container\\\"> \\n     <span class=\\\"loading-item\\\"> \\n         <progress max=\\\"{{ jdmLoadingService.directives[referenceId].total }}\\\" value=\\\"{{ jdmLoadingService.directives[referenceId].total - jdmLoadingService.directives[referenceId].messages.length }}\\\"></progress> \\n     </span>\\n</span>\\n\");}]);"],"sourceRoot":"/source/"}